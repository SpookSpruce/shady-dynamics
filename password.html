<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Password Required!</title>
  <script>
    async function submitPassword() {
      console.log('Start');
      const password = prompt('Enter');

      const response = await fetch('/.netlify/functions/hash-password', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({'password': password}),
      });
      const data_netlify = await response.json();
      let h_pword;
      fetch('hash.txt')
        .then(Response => Response.text())
        .then(data => {
          h_pword = data;
          console.log(h_pword);
          if (h_pword && data){
            console.log(JSON.stringify(data_netlify), data);
          }
        })
        .catch(error => {
          console.error(error);
        });
      console.log(data);
    }
  </script>
</head>
<body>
  <button onclick="submitPassword()">hello</button>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Password Required!</title>
  <script>
    async function submitPassword() {
      try{
        console.log('Start');
        const entered_password = prompt('Enter');
        if (!entered_password) return;
        const response = await fetch('/.netlify/functions/hash-password', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({password: entered_password}),
        });
        const {hashedPassword} = await response.json();
        const storedHash = await fetch('hash.txt').then(r => r.text());
        if (storedHash && hashedPassword){
            console.log(hashedPassword, storedHash);
        }
      } catch (error){
        console.error(error);
        alert('Error')
      }
    }
  </script>
</head>
<body>
  <button onclick="submitPassword()">hello</button>
</body>
</html>
